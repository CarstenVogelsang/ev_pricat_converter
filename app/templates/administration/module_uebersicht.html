{% extends "administration/base.html" %}
{% from "macros/admin_tile.html" import admin_tile %}
{% from "macros/breadcrumb.html" import breadcrumb %}

{% block title %}Module - Administration{% endblock %}

{% block admin_content %}
{{ breadcrumb([
    {'label': 'Administration', 'icon': 'ti-settings'},
    {'label': 'Module', 'icon': 'ti-apps'}
]) }}

<h4 class="mb-4"><i class="ti ti-apps me-2"></i>Module verwalten</h4>

{# Mapping von Modul-Code zu Admin-Route (da Admin-Routes unterschiedlich strukturiert sind) #}
{% set admin_routes = {
    'pricat': 'admin.pricat',
    'kunden': 'admin.kunden_report',
    'lieferanten': 'admin.lieferanten_auswahl',
    'content': 'admin.content_generator',
    'dialog': 'dialog_admin.index',
    'schulungen': 'schulungen_admin.index',
    'projekte': 'projekte_admin.index',
    'mailing': 'mailing_admin.index',
    'support': 'support_admin.dashboard'
} %}

<div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 row-cols-xl-4 g-4">
    {% for modul in module %}
    {% set admin_route = admin_routes.get(modul.code) %}
    {% if admin_route %}
    {{ admin_tile(
        modul.name,
        modul.beschreibung,
        modul.icon,
        url_for(admin_route),
        color_hex=modul.color_hex,
        settings_url=url_for('admin.modul_einstellungen', code=modul.code),
        aktiv=modul.aktiv
    ) }}
    {% endif %}
    {% endfor %}
</div>

<style>
    .admin-tile {
        transition: transform 0.2s, box-shadow 0.2s;
    }
    .admin-tile:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    .admin-tile .card-body {
        min-height: 120px;
    }
</style>
{% endblock %}
