{# CTA-Button-Sektion: Universeller Call-to-Action (PRD-013 Phase 5) #}
{# Config: {"link_typ": "fragebogen|extern", "fragebogen_id": int, "externe_url": str, #}
{#         "button_text": "...", "button_farbe": "#e83e8c", "teaser_text": "..."} #}
{# Benötigt: cta_link im Context (von mailing_service berechnet) #}

{% if cta_link %}
<table role="presentation" cellpadding="0" cellspacing="0" border="0" width="100%">
    <tr>
        <td style="padding: 25px 40px 35px 40px; text-align: center;">
            {% if config.teaser_text %}
            <!-- Teaser Text -->
            <table role="presentation" cellpadding="0" cellspacing="0" border="0" width="100%" style="margin-bottom: 20px;">
                <tr>
                    <td style="font-family: Arial, sans-serif; font-size: 16px; line-height: 1.5; color: #444444; text-align: center;">
                        {{ config.teaser_text|safe }}
                    </td>
                </tr>
            </table>
            {% endif %}

            <!-- Button Container -->
            <table role="presentation" cellpadding="0" cellspacing="0" border="0" style="margin: 0 auto;">
                <tr>
                    <td style="border-radius: 8px; background-color: {{ config.button_farbe|default('#e83e8c') }};">
                        <a href="{{ cta_link }}"
                           target="_blank"
                           style="display: inline-block; padding: 16px 40px; font-family: Arial, sans-serif; font-size: 18px; font-weight: bold; color: #ffffff; text-decoration: none; border-radius: 8px;">
                            {{ config.button_text|default('Jetzt teilnehmen') }}
                        </a>
                    </td>
                </tr>
            </table>
            <!-- /Button Container -->

            <!-- Fallback-Link -->
            <p style="margin-top: 15px; font-family: Arial, sans-serif; font-size: 12px; color: #888888;">
                Falls der Button nicht funktioniert:<br>
                <a href="{{ cta_link }}" style="color: {{ config.button_farbe|default('#e83e8c') }}; word-break: break-all;">{{ cta_link }}</a>
            </p>
        </td>
    </tr>
</table>
{% else %}
<!-- CTA nicht verfügbar (kein Link konfiguriert) -->
{% endif %}
